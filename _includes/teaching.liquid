<div class="teaching">
  {% if site.teaching != blank %}
    <div
      class="table-responsive"
      {% if include.limit and page.announcements.scrollable and site.teaching | size > 3 %}
        style="max-height: 60vw"
      {% endif %}
    >
      <table class="table table-sm table-borderless">
        <thead>
          <tr>
            <th scope="col" style="width: 20%">Semester</th>
            <th scope="col" style="width: 20%">Course</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% assign items = site.teaching %}

          {%- comment -%}
          Build a comma-separated list of unique years from Semester (e.g., "2026 Fall" -> "2026").
          {%- endcomment -%}
          {% assign years = "" %}
          {% for item in items %}
            {% assign parts = item.Semester | split: " " %}
            {% assign year = parts[0] %}
            {% unless years contains year %}
              {% if years == "" %}
                {% assign years = year %}
              {% else %}
                {% assign years = years | append: "," | append: year %}
              {% endif %}
            {% endunless %}
          {% endfor %}

          {% assign years_array = years | split: "," | sort | reverse %}
          {% assign seasons = "Fall,Summer,Spring,Winter" | split: "," %}

          {%- comment -%}
          Loop over years (descending), then seasons in desired order, then items.
          {%- endcomment -%}
          {% for year in years_array %}
            {% for season in seasons %}
              {% for item in items %}
                {% assign parts = item.Semester | split: " " %}
                {% assign item_year = parts[0] %}
                {% assign item_season = parts[1] %}
                {% if item_year == year and item_season == season %}
                  <tr>
                    <td>{{ item_season }} {{ item_year }}</td>
                    <td>{{ item.CourseNo }}</td>
                    <td>{{ item.CourseTitle }}</td>
                  <!--  <td><a href="{{ item.url | relative_url }}">{{ item.CourseNo }}</a></td>
                    <td><a href="{{ item.url | relative_url }}">{{ item.CourseTitle }}</a></td> -->
                  </tr>
                {% endif %}
              {% endfor %}
            {% endfor %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>No news so far...</p>
  {% endif %}
</div>
